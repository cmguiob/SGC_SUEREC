

Lleva la tabla a formato ancho por polígono/capa. SWAT y SWATprepR esperan una fila por capa (horizonte) y columnas para cada propiedad:

```{r}

tabla_wide <- tabla_long %>%
  select(soil_id, top, bottom, property, value) %>%
  pivot_wider(names_from = property, values_from = value)

```

Verificación con SWATprepR

Las columnas requeridas por SWAT son:

* soil_id (ID polígono/unidad cartográfica)

* top (cm)

* bottom (cm)

* sand (%)

* silt (%)

* clay (%)

* soc (g/kg o % según el modelo, revisa unidad esperada)

* bulk density


```{r}

library(SWATprepR)

# Renombra columnas según espera SWATprepR (si es necesario)
# Ejemplo: sand, silt, clay, soc

soil_swat <- swat_prep_soil(
  soil_data     = tabla_wide,
  soil_id       = "soil_id",
  layer_top     = "top",
  layer_bottom  = "bottom",
  sand          = "sand",
  silt          = "silt",
  clay          = "clay",
  soc           = "soc",     # o "oc" si tu tabla así la llama
  bdod          = "bdod"    # bulk density
  #phh2o         = "phh2o"    # pH en agua, opcional, para modelos biogeoquímicos
)

# Exporta el archivo de suelos listo para SWAT
write_swat_soil(soil_swat, file = "soil_db.txt")

```


